pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
-- hello world
-- 

music(0)

function _helloupdate()
	if (btnp(❎)) then _init() 
	end
end

function _draw()
	cls()
	
	-- for each color
	-- (from pink -> white)
	
	for col = 14,7,-1 do
		
		-- for each letter
		for i=1,11 do
		
			-- t() is the same as time()
			t1 = t()*30 + i*4 - col*2
			
			-- position
			x = 8+i*8     +cos(t1/90)*3
			y = 38+(col-7)+cos(t1/50)*5
			pal(7,col)
			spr(16+i, x, y)
		end
 end
	
	print("pigs eat apples",
	 30, 70, 14) 
	print("bio apples only",
	 30, 80, 12)
	 print("press x to play",
	 30, 60, 12) 
	spr(1, 64-4, 90) -- ♥
end
-->8
-- bobopig

function _init()
 _helloupdate()
	create_player()
end

function _update()
 move2()
 update_camera()
	interact(p.x,p.y)
end

function _draw()
	cls(12)
	map(0, 0, 0, 0, 128, 64)
	if (is_grounded()) then
		p.y = flr(flr(p.y)/8)*8
	end
 draw_pig()
 draw_ui()
 --pick_up_apple(x,y)
 
end
-->8
--move
function is_grounded()
	bloc = mget(flr(p.x+4)/8,flr(p.y)/8+1)
	return fget (bloc,0)
end

function move2()
	p.dx=0
	 --animate feet
 p.sprite += p.timing
   if p.sprite > 2 
  	then p.sprite = 1 
  	end
			if (btn(0)) p.dx =-2
			if (btn(1)) p.dx = 2
			p.x += p.dx
			if (btnp(5))
 		then p.dy-=p.boost end
			if (is_grounded()) then
			p.dy =0
			if (btnp(2)) p.dy = -6
			else
			p.dy += 0.98
			if (p.dy > 4) p.dy = 4
			end
			p.y += p.dy
end
	

-->8
--pommes bio

function next_tile(x,y)
	sprite = mget(flr(x)/8,flr(y)/8)
	mset((x)/8,(y)/8,sprite+1)
end

function pick_up_apple(x,y)
	next_tile(x,y)
	p.apples+=1
	sfx(1)
end
-->8
-- flag & camera


function check_flag(flag,x,y)
	local sprite = mget(flr(x)/8,flr(y)/8)
	return fget(sprite,flag)
end

function update_camera()
 camx=mid(0,p.x-7.5,256-15)
 camy=mid(0,p.y-7.5,31-15)
	camera(camx,camy)
end

--function apple(x,y)
--	next_tile(x,y)
--	p.apples+=1
--end


-->8
--ui

function draw_ui()
	camera()
	palt(0,false)
	palt(12,true)
	spr(18,2,1)
	palt()
	print_outline("X"..p.apples,10,2)
end

function print_outline(text,x,y)
	print(text,x-1,y,0)
	print(text,x+1,y,0)
	print(text,x,y-1,0)
	print(text,x,y+1,0)
	print(text,x,y,7)
end
-->8
--interact

	function interact(x,y)
   
	if check_flag(1,x,y) then
  pick_up_apple(x,y)
  	end

	end
-->8
-- player

function create_player()
	p={
		sprite = 1, 
		x=0,
		y=0,
		dx= 0,
		dy= 0,
		max_dx=2,
		max_dy=3,
		acc=0.5,
		boost=4,
		timing=0.25,
		apples=0
	}
	gravity=0.3
	friction=0.85
	
end

function draw_pig()
  spr(p.sprite,p.x,p.y)
    
end
__gfx__
00000000000000000000000000000400000000000000000000000000000000000000000000000000000bb0000bbbbbb000000000000000000000000000000000
00000000000000000000000000004000000000000000000000000000000000000000000000000000b0bbbb0bbbbbbbbb00000000000000000000000000000000
007007000000000000000000000838000000000000000000000000000000000000000000000000000b8b1bb00b8b1bb000000000000000000000000000000000
0007700000000e0000000e00008e88800000000000000000000000000000000000000000000000001bbbbbb11bbbbbb100000000000000000000000000000000
000770000efffff00efffff00088e8e0000000000000000000000000000000000000000000000000bbbbb8bbbbbbb8bb00000000000000000000000000000000
00700700e0ffffffe0ffffff008888e0000000000000000000000000000000000000000000000000181bb1b11bbbb1b100000000000000000000000000000000
0000000000eeeee000eeeff000088e00000000000000000000000000000000000000000000000000110180111bbbbbb100000000000000000000000000000000
0000000000e000e0000e0e0000000000000000000000000000000000000000000000000000000000000000001111111100000000000000000000000000000000
c1dddd6600000000ccccc4cc00000000000000000000000000000000000000002777777700000000000000000000000000000000000000000000000000000000
c155556600000000cccc4ccc00000000000000000000000000000000000000009aaaaaaf00000000000000000000000000000000000000000000000000000000
c155557600000000ccc838cc00000000000000000000000000000000000000009aaaaaaf00000000000000000000000000000000000b00000000000000000000
c151557600000000cc8e888c00000000000000000000000000000000000000009aaaaaaf00000000000000000000000000000000000b00000033330000000000
c15d117600000000cc88e8ec00000000000000000000000000000000000000009aaaaaaf00000000000000000000000000000000b00b00000333333000000000
c155d16600000000cc8888ec00000000000000000000000000000000000000009aaaaaaf000000000000000000000000000000000b0b00b0333a333300000000
c155556600000000ccc88ecc00000000000000000000000000000000000000009aaaaaaf000000000000000000000000000000000b0b0b0033a7a33300000000
c111111600000000cccccccc000000000000000000000000000000000000000099999992000000000000000000000000000000000b0b0b00333a333300000000
d66667d666666667d66666671010122244440404bb0b0000000000000000000000000000000001100110000000bbbbbb333333333333333333333333bbbbbbbb
5d66765d666666765d66667611101222444404440b3b0000000000000000000000000000011100777711100003333333333333333333b33333333333bbbbbbbb
55dd6655dddddd6655dddd660100112444442400003b00000000000000aff700000000000011177ff7770000333333333339a3333333bab33333333333333333
55dd6655dddddd6655dddd660111122244442400000b0bb000000000009aaf0000000000000177fff7ff711033333333339a7a33333bbb333333333333333333
55dd6655dddddd6655dddd660000122244440000000b3b0000070000009aaf0000000000017777fffffff711333233223399a93333333b33333333333bb33b33
55dd6655dddddd6655dddd660000112444444000000b3000007a700000999a00000000000777777fffff771033223222333993333b333333333333333bb33333
5111d651111111d6511111d60001222224444400000b000000070000000000000000000017fff77fffff77703242244233333333333333333333333333333333
11111d111111111d1111111d0011111224444440000b000000030000000000000000000077ffffffffffff772444444233333333333333333333333333333333
00000000bbbbbbbb444444444444444444444444444444444444444400000006d0000000ffffffffbbbbbb00000bb000bbbbbbbbbbbbbb003333333300333300
00000000333333332244224444444444444444444466444444d6644400000066dd000000ffffffff33333330000b3b00bbbbbbbbbbbbbbb03333333303333330
be8288773333333342244224444444444464444442d6744442dd674400000066ddd00000ffffffff33333333000b030033333333333333bb3333333333333333
be8828eb3333333344224424444444444666d44422dd664422dd664400006666dddd0000ffffffff3333333300030887333333333333333b3333333333333b33
bfe88efb333233222442244444444444422d666422ddd66422dd664400066666ddddd000ffffffff33323322088708883bb33b33333333333313313333333333
0bfeefb03322322222442244444444444442262422dddd6422dddd4400666d66dddddd00ffffffff33223222088800883bb3333333bb3333313113133b333333
00bbbb003242244242244224444444444444224422222244422222440666d666ddddddd0ffffffff32422442008800003333333333bb33331311113133333333
000000002444444244444444444444444444444444444444444444446d666666ddddddddffffffff244444420000000033333333333333331111111133333333
__gff__
0000000200000000000000000000000000000200000000000100000000000000010101000000000100000001000000000001010101010100000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000a0a08080000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000a0b0b0a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000232400000000000000260003000000000000000026030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000002b313a0000000000002b313131313a0000000000002b3a0000000300000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0a000000000000000000000000323333000000000000343333333332000000000000002500000000000b0b00000003030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0b0b0c0000000300000000000003250000030018000025001a000000030000000000001e000000000b0b0b0b000303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0a0a0a00000000002700000000270000001818180000001a1a1a0000222121000000002c000018180a0b0b0a030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
23243b001d031d0000000000000026001818001d3000001a2603261d222121263f3f3f3e3f1d002700232403030303030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
31313131313131313a0015002b31313118183131313131313a1a2b31313131313131313131313131313131313131313a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
323333333333333235251e033432253233333633343333332500333234333233333335353331313131343332333332330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3232323232323332353533363633333433333333353333330000363333323333333335353131313333333232333233340000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
